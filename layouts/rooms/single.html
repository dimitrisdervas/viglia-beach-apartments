{{ define "main" }}
<div class="page rooms">
  <!-- Mobile Title Section (fixed at top on mobile) -->
  <div class="mobile-title-section">
    <div class="title">{{ .Title }}</div>
  </div>

  {{ if .Params.images }}
  <!-- Slideshow Section -->
  <section class="slideshow-section" style="height: 60vh; min-height: 300px;">
    <div class="slideshow-container" style="height: 100%;">
      <div class="slideshow-slides"
        style="animation: room-slide {{ mul (len .Params.images) 5 }}s infinite ease-in-out;">
        {{ range .Params.images }}
        <div class="slideshow-slide">
          <img src="/images/all/2000px/{{ .image }}" srcset="/images/all/2000px/{{ .image }} 2000w,
                       /images/all/1200px/{{ .image }} 1200w,
                       /images/all/900px/{{ .image }} 900w,
                       /images/all/600px/{{ .image }} 600w" sizes="100vw" alt="{{ .title }}" loading="lazy">
        </div>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}

  <!-- Description Section -->
  <section class="description-section container" style="padding: 2rem 1rem 3rem;">
    <div class="description">
      <div class="title" style="font-size: 2.5rem; font-weight: 700; color: #4a4a4a; margin-bottom: 1.5rem;">
        {{ .Title }}
      </div>
      <div class="text-content" style="color: #8a8a8a; line-height: 27px;">
        {{ .Params.description | markdownify }}
      </div>
    </div>
  </section>

  {{ if .Params.images }}
  <!-- Photos Gallery Section -->
  <section class="photos-rooms--section container" style="padding: 2rem 1rem 3rem;">
    <div class="component-header-line">
      <div class="component-title">Gallery</div>
    </div>
    <div class="content" style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 1rem;">
      {{ range .Params.images }}
      <div class="material-placeholder" style="flex-basis: 270px; flex-grow: 1; margin-bottom: 1rem; cursor: pointer;">
        <img src="/images/all/600px/{{ .image }}" srcset="/images/all/900px/{{ .image }} 900w,
                     /images/all/600px/{{ .image }} 600w" sizes="(max-width: 767px) 100vw, 270px" alt="{{ .title }}"
          style="width: 100%; height: 180px; object-fit: cover; border-radius: 4px; transition: transform 0.3s;"
          loading="lazy">
      </div>
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{ if .Params.facilities }}
  <!-- Facilities Section -->
  <section class="facilities-section container" style="padding: 2rem 1rem 3rem;">
    <div class="facilities">
      <div class="component-header-line">
        <div class="component-title">Facilities</div>
      </div>
      <div class="content-facilities" style="display: flex; flex-wrap: wrap;">
        {{ range .Params.facilities }}
        <div class="facility"
          style="border-bottom: 1px solid #eee; flex-basis: 25%; min-width: 200px; display: flex; align-items: center; padding: 15px;">
          <i class="material-icons" style="color: #e7ad44; padding: 5px;">done</i>
          <span style="color: #8a8a8a;">{{ .facility }}</span>
        </div>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}

  {{ if .Params.rate_keys }}
  {{ $rates := .Site.Data.content.rates }}
  <!-- Rates Section - from rates.yml -->
  <section class="rates-section container" style="padding: 2rem 1rem 3rem;">
    <div class="rates">
      <div class="component-header-line">
        <div class="component-title">Rates</div>
      </div>
      <div class="content" style="display: flex; flex-wrap: wrap; gap: 1.5rem;">
        {{ range .Params.rate_keys }}
        {{ $rateKey := . }}
        {{ $rateEntry := index $rates.prices $rateKey }}
        {{ if $rateEntry }}
        <div class="rate-variant"
          style="flex: 1; min-width: 280px; border: 1px solid #e2e2e2; border-radius: 4px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <!-- Variant Name -->
          <div class="variant-name"
            style="background: #024b79; color: #fff; padding: 12px 16px; font-weight: 700; font-size: 1rem;">
            {{ $rateEntry.display_name }}
          </div>
          <!-- Season Prices -->
          {{ range $rateEntry.prices }}
          <div class="season-price"
            style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; border-bottom: 1px solid #eee;">
            <div class="season" style="text-transform: capitalize; color: #8a8a8a; font-size: 0.95rem;">{{ .season }}
              Season</div>
            <div class="price"
              style="font-weight: 700; font-size: 1.25rem; font-family: 'Merriweather', serif; color: #e7ad44;">{{
              .price }}</div>
          </div>
          {{ end }}
        </div>
        {{ end }}
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}

  <!-- Reviews Section -->
  <section class="reviews-rooms--section container" style="padding: 2rem 1rem 3rem; margin-bottom: 3rem;">
    <div class="reviews-rooms">
      <div class="component-header-line">
        <div class="component-title">People Reviews</div>
      </div>
      <div class="reviews-carousel" style="border: 1px solid #DDA32D; width: 100%;">
        <div class="reviews-slides">
          {{ range .Site.Data.content.reviews }}
          <div class="review-room"
            style="min-width: 100%; font-size: 18px; margin: 18px 0; padding: 20px; font-style: italic; line-height: 28px; color: #8a8a8a; font-weight: 300;">
            <div class="review-text" style="margin-bottom: 20px;">{{ .text | markdownify }}</div>
            <div class="name" style="display: inline; font-weight: bold; color: #4a4a4a;">{{ .name }}</div>
            <div class="country" style="display: inline; font-weight: bold; color: #8a8a8a; margin-left: 0.5rem;">{{
              .country }}</div>
            <div class="site" style="color: #999; font-size: 12px; margin-top: 4px;">{{ .site }}</div>
          </div>
          {{ end }}
        </div>
      </div>
    </div>
  </section>

  <!-- Reservation Section -->
  <section class="contact-rooms--section" id="reservation" style="background: #f3f3f3; padding: 30px 1rem 50px;">
    <div class="container">
      <div class="component-header">
        <div class="component-title">Reservation</div>
      </div>
      <div class="reservation-wrapper"
        style="display: flex; flex-wrap: wrap; gap: 2rem; max-width: 1000px; margin: 0 auto;">
        <!-- Contact Form -->
        <div class="contact" style="flex: 2; min-width: 350px;">
          <form id="reservation-form" method="post" action="/thankyou/" netlify data-parsley-validate
            netlify-honeypot="bot-field">
            <div class="hidden">
              <label>Don't fill this out if you're human: <input name="bot-field"></label>
            </div>

            <div class="input-field">
              <input id="name" name="name" type="text" data-parsley-required="true" placeholder=" ">
              <label for="name">Name</label>
            </div>

            <div class="input-field">
              <input id="email" name="email" type="email" data-parsley-required="true" placeholder=" ">
              <label for="email">Email</label>
            </div>

            <div class="input-field">
              <input id="phone" name="phone" type="text" placeholder=" ">
              <label for="phone">Phone</label>
            </div>

            <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
              <div class="checkin" style="flex: 1; min-width: 200px;">
                <label for="checkin">Checkin</label>
                <input type="date" name="checkin" id="checkin" data-parsley-required="true">
              </div>
              <div class="checkout" style="flex: 1; min-width: 200px;">
                <label for="checkout">Checkout</label>
                <input type="date" name="checkout" id="checkout" data-parsley-required="true">
              </div>
            </div>

            <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
              <div class="input-field" style="flex: 1; min-width: 200px;">
                <select name="persons" id="persons" data-parsley-required="true">
                  <option value disabled selected>Persons</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                </select>
              </div>
              <div class="input-field" style="flex: 1; min-width: 200px;">
                <select name="villa-type" id="villa" data-parsley-required="true">
                  <option value disabled selected>{{ .Title }}</option>
                  <option value="{{ .Title }}">{{ .Title }}</option>
                </select>
              </div>
            </div>

            <div class="input-field">
              <textarea name="message" id="textarea" placeholder=" " rows="3"></textarea>
              <label for="textarea">Message</label>
            </div>

            <div class="recaptcha">
              <div data-netlify-recaptcha></div>
            </div>

            <div class="button-submit">
              <button class="submit-button waves-effect" type="submit">Ask Owner</button>
            </div>
          </form>
        </div>

        <!-- Booking.com Widget -->
        <div class="booking-button-wrapper"
          style="flex: 1; min-width: 280px; background: #003580; border-radius: 8px; padding: 2rem; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center;">
          <img src="/images/awards/booking.png" alt="Booking.com" style="max-width: 200px; margin-bottom: 1rem;"
            onerror="this.style.display='none';">
          <div
            style="font-size: 2rem; font-weight: 700; color: #fff; font-family: 'Arial', sans-serif; margin-bottom: 0.5rem;">
            Booking<span style="color: #0aa1eb;">.com</span></div>
          <div class="text"
            style="color: rgba(255,255,255,0.9); font-size: 0.95rem; margin-bottom: 1.5rem; line-height: 1.5;">Check for
            availability and Book on Booking.com</div>
          <a class="booking-button" href="https://www.booking.com/hotel/gr/viglia-beach-apartments.el.html"
            target="_blank" rel="noopener"
            style="display: inline-block; background: #0aa1eb; color: #fff; padding: 12px 30px; border-radius: 4px; font-weight: 700; font-size: 1rem; text-decoration: none; transition: background 0.3s;">Check
            availability</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Details Section -->
  <section class="details-section container" style="padding: 2rem 1rem 3rem;">
    <div class="component-header">
      <div class="component-title">Contact</div>
    </div>
    <div class="contact-details">
      <div class="field phone">
        <i class="material-icons">phone</i>
        <span>+30 28220.23893</span>
      </div>
      <div class="field mobile">
        <i class="material-icons">phonelink_ring</i>
        <span>+30 6978.11.53.49</span>
      </div>
      <div class="field email">
        <i class="material-icons">email</i>
        <span>vigliahotel@gmail.com</span>
      </div>
      <div class="field address">
        <i class="material-icons">room</i>
        <span>Metoxi Viglia, KÃ­ssamos, 73400, Greece</span>
      </div>
    </div>
  </section>
</div>

<style>
  /* Room-specific slideshow animation */
  @keyframes room-slide {

    0%,
    18% {
      transform: translateX(0);
    }

    20%,
    38% {
      transform: translateX(-100%);
    }

    40%,
    58% {
      transform: translateX(-200%);
    }

    60%,
    78% {
      transform: translateX(-300%);
    }

    80%,
    98% {
      transform: translateX(-400%);
    }

    100% {
      transform: translateX(0);
    }
  }

  /* Mobile title section styles */
  @media (min-width: 768px) {
    .mobile-title-section {
      display: none;
    }

    .description .title {
      display: block !important;
    }
  }

  @media (max-width: 767px) {
    .description .title {
      display: none;
    }

    .rooms {
      display: flex;
      flex-direction: column;
    }

    .mobile-title-section {
      order: 1;
    }

    .description-section {
      order: 2;
    }

    .photos-rooms--section {
      order: 3;
    }

    .rates-section {
      order: 4;
    }

    .facilities-section {
      order: 5;
    }

    .reviews-rooms--section {
      order: 6;
    }

    .contact-rooms--section {
      order: 7;
    }

    .details-section {
      order: 8;
    }
  }

  /* Gallery image hover */
  .material-placeholder:hover img {
    transform: scale(1.05);
  }

  /* Reviews carousel for rooms */
  .reviews-rooms .reviews-carousel {
    overflow: hidden;
  }

  .reviews-rooms .reviews-slides {
    display: flex;
    animation: review-slide 15s infinite ease-in-out;
  }

  .reviews-rooms .reviews-carousel:hover .reviews-slides {
    animation-play-state: paused;
  }
</style>
{{ end }}