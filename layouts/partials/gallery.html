{{/* Gallery Partial - Uses Hugo Pipes for image optimization */}}
{{/* Usage: {{ partial "gallery" (dict "images" .Site.Data.content.gallery_images "limit" 6) }} */}}

{{ $limit := .limit | default 6 }}

<div class="gallery-grid" style="display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center;">
    {{/* Get all images from assets/images/gallery folder */}}
    {{ $galleryImages := resources.Match "images/gallery/*" }}

    {{ range first $limit $galleryImages }}
    {{/* Process the image - create thumbnail and full size */}}
    {{ $thumbnail := .Resize "320x240 q85" }}
    {{ $medium := .Resize "800x600 q85" }}

    <div class="gallery-item" style="flex: 1 1 calc(33.333% - 0.5rem); min-width: 150px; max-width: 300px;">
        <a href="{{ $medium.RelPermalink }}" target="_blank" class="gallery-link">
            <img src="{{ $thumbnail.RelPermalink }}" width="{{ $thumbnail.Width }}" height="{{ $thumbnail.Height }}"
                alt="Viglia Beach Apartments"
                style="width: 100%; height: 150px; object-fit: cover; border-radius: 4px; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease;"
                loading="lazy" class="gallery-image">
        </a>
    </div>
    {{ else }}
    <p style="color: #999; text-align: center;">No gallery images found in assets/images/gallery/</p>
    {{ end }}
</div>

<style>
    .gallery-item:hover .gallery-image {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
</style>